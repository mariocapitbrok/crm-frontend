# CRM Frontend Context Map

## Contexts at a Glance

- **Leads**: Owns lead directory experiences, saved view orchestration, and lead-specific state. Depends on Identity for owner lookups and Organizations for account rollups.
- **Contacts**: Manages contact directory presentation and preferences. Consumes Identity for owner display names and Organizations for account labels.
- **Organizations**: Supplies lightweight organization directory data for other contexts; no direct UI yet.
- **Deals**: Placeholder context for future pipeline work; pending dedicated data sources and UI scaffolding.
- **Identity**: Provides cross-context user identity access (owners, assignees) and is deliberately read-only for feature teams.

## Integration Contracts

- Identity exposes `useIdentityUsers()` returning `IdentityUser[]` with `{ id, first_name, last_name, email }` â€” consume this instead of duplicating `/users` queries.
- Organizations exports `useOrganizationDirectory()` serving `{ id, accountname }` records; contexts map IDs to labels on the client.
- Leads and Contacts surface UI state via their local `useLeadsUiStore` / `useContactsUiStore` hooks; other contexts should not import these stores.

## Migration Notes

- Shared presentation primitives stay under `src/components/`; each context wraps them inside its `ui` folder to bind domain-specific data.
- When introducing a new context, create `src/domains/<context>/{application,domain,ui}` and export hooks/components through `index.ts` barrels.
- Saved views expect an `EntityKey` defined in `src/domains/entityKeys.ts`; extend that union when new contexts add persisted views.
